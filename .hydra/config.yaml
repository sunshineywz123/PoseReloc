trainer:
  _target_: pytorch_lightning.Trainer
  gpus: 0
  min_epochs: 1
  max_epochs: 10
  gradient_clip_val: 0.5
  num_sanity_val_steps: 3
  progress_bar_refresh_rate: 20
  weights_summary: null
  default_root_dir: lightning_logs/
model:
  _target_: src.models.mnist_model.LitModelMNIST
  optimizer: adam
  lr: 0.001
  weight_decay: 5.0e-05
  architecture: SimpleDenseNet
  input_size: 784
  lin1_size: 256
  dropout1: 0.3
  lin2_size: 256
  dropout2: 0.25
  lin3_size: 128
  dropout3: 0.2
  output_size: 10
datamodule:
  _target_: src.datamodules.mnist_datamodule.MNISTDataModule
  data_dir: ${data_dir}
  batch_size: 64
  train_val_test_split:
  - 55000
  - 5000
  - 10000
  num_workers: 0
  pin_memory: false
callbacks:
  model_checkpoint:
    _target_: pytorch_lightning.callbacks.ModelCheckpoint
    monitor: val/acc
    save_top_k: 2
    save_last: true
    mode: max
    dirpath: checkpoints/
    filename: '{epoch:02d}'
  early_stopping:
    _target_: pytorch_lightning.callbacks.EarlyStopping
    monitor: val/acc
    patience: 100
    mode: max
    min_delta: 0.0
work_dir: ${hydra:runtime.cwd}
data_dir: ${work_dir}/data
print_config: true
type: sfm
data_base_dir: /nas/users/hexingyi/scan_data
output_base_dir: /nas/users/hexingyi/onepose_sfm
match_type: softmax
redo: true
enable_loftr_post_refine: true
overwrite_all: false
overwrite_coarse: false
overwrite_fine: false
use_global_ray: true
use_local_ray: true
debug: true
ray:
  slurm: false
  n_workers: 3
  n_cpus_per_worker: 5
  n_gpus_per_worker: 1
  local_mode: false
dataset:
  max_num_kp3d: 20000
  max_num_kp2d: 10000
  data_dir:
  - ${data_base_dir}/0413-juliecookies-box juliecookies-1 juliecookies-2
  - ${data_base_dir}/0414-babydiapers-others babydiapers-1 babydiapers-2
  - ${data_base_dir}/0415-captaincup-others captaincup-1 captaincup-2
  - ${data_base_dir}/0416-tongyinoodles-others tongyinoodles-1 tongyinoodles-2
  - ${data_base_dir}/0418-cookies1-others cookies1-1 cookies1-2
  - ${data_base_dir}/0420-liuliumei-others liuliumei-1 liuliumei-2
  - ${data_base_dir}/0421-cannedfish-others cannedfish-1 cannedfish-2
  - ${data_base_dir}/0443-wheatbear-others wheatbear-1 wheatbear-2
  - ${data_base_dir}/0445-pistonhead-others pistonhead-1 pistonhead-2
  outputs_dir: ${output_base_dir}
network:
  detection: loftr
  detection_model_path: weight/superpoint_v1.pth
  matching: loftr
  matching_model_path: weight/superglue_outdoor.pth
sfm:
  gap: 3
  covis_num: 8
  track_length: 8
disable_lightning_logs: true
