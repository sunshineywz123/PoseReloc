# @package _global_

type: mvs
work_dir: ${hydra:runtime.cwd}
data_base_dir: '/raid/zihao/arscan_aligned_temp/arscan_data'
sfm_base_dir: "/raid/hexingyi/onepose_sfm_v3"
output_base_dir: "/raid/hexingyi/onepose_mvs"
match_type: "softmax"
redo: True
enable_loftr_post_refine: True

# overwrite_all: False
# overwrite_coarse: False
# overwrite_fine: True

use_global_ray: False
use_local_ray: False
debug: True

ray:
  slurm: False
  n_workers: 2
  n_cpus_per_worker: 5
  n_gpus_per_worker: 1
  local_mode: False
dataset:
  max_num_kp3d: 15000 # 20000 original
  max_num_kp2d: 10000

  # data_dir:
  #     # - ${data_base_dir}/0410-huiyuan-box huiyuan-1 huiyuan-2
  #     - ${data_base_dir}/0413-juliecookies-box juliecookies-1 juliecookies-2
  #     - ${data_base_dir}/0414-babydiapers-others babydiapers-1 babydiapers-2
  #     - ${data_base_dir}/0415-captaincup-others captaincup-1 captaincup-2
  #     - ${data_base_dir}/0416-tongyinoodles-others tongyinoodles-1 tongyinoodles-2
  #     - ${data_base_dir}/0418-cookies1-others cookies1-1 cookies1-2
  #     - ${data_base_dir}/0420-liuliumei-others liuliumei-1 liuliumei-2
  #     - ${data_base_dir}/0421-cannedfish-others cannedfish-1 cannedfish-2
  #     - ${data_base_dir}/0443-wheatbear-others wheatbear-1 wheatbear-2
  #     - ${data_base_dir}/0445-pistonhead-others pistonhead-1 pistonhead-2

  #     # - ${data_base_dir}/0548-duck-others duck-1
  #     # - ${data_base_dir}/0477-cutlet-bottle cutlet-1
  #     # - ${data_base_dir}/0600-toyrobot-others toyrobot-1
  #     # - ${data_base_dir}/0601-oldtea-box oldtea-1
  #     # - ${data_base_dir}/0602-sensesheep-others sensesheep-1
  #     # - ${data_base_dir}/0603-fakebanana-others fakebanana-1
  #     # - ${data_base_dir}/0604-catmodel-others catmodel-1
  #     # - ${data_base_dir}/0605-pingpangball-ball pingpangball-1
  #     # - ${data_base_dir}/0606-yellowduck-others yellowduck-1
  #     # - ${data_base_dir}/0607-oringe-others oringe-1
  #     # - ${data_base_dir}/0608-greenteapot-others greenteapot-1
  #     # - ${data_base_dir}/0609-blackteapot-others blackteapot-1
  #     - ${data_base_dir}/0610-lecreusetcup-others lecreusetcup-1
  #     # - ${data_base_dir}/0611-bosecolumnaudio-others bosecolumnaudio-1

  data_dir: ${data_base_dir}
  top_k_obj: null
  num_seq: null
  ids:
    # Train Set
    # - '0410'
    # - '0413'
    # - '0414'
    # - '0415'
    # - '0416'
    # - '0418'
    # - '0420'
    # - '0421'
    # - '0443'
    # - '0445'
    # - '0448'
    # - '0460' # Problem exists for this data! no box trans, no intrin_ba, don't use!
    # - '0461'
    # - '0462'
    # - '0463'
    # - '0464'
    # - '0465'
    # - '0477'
    # - '0479'
    # - '0484'
    # - '0499'
    # - '0506'
    # - '0507'
    # - '0509'
    # - '0512'
    # - '0513'
    # - '0516'
    # - '0529'
    # - '0530'
    # - '0531'
    # - '0532'
    # - '0533'
    # - '0536'
    # - '0542'
    # - '0545'
    # - '0546'
    # - '0549'
    # - '0556'
    # - '0561'
    # - '0562'
    # - '0563'
    # - '0566'
    # - '0567'
    # - '0569'
    # - '0571'
    # - '0572'
    # - '0573'
    # - '0574'
    # - '0575'
    # - '0595'

    # # Some hard objects:
    # # These are known good!
    - '0600'
    # - '0601'
    # - '0602'
    # - '0604'
    - '0606'
    - '0607'
    # - '0608'
    # - '0610'

    # - '0612'
    # - '0613'
    # - '0614'
    # - '0615'
    # - '0616'
    # - '0617'

    # - '0618'
    # - '0619'
    # - '0620'
    # - '0621'
    # - '0622'
    # - '0623'
    # - '0624'
    # - '0625'
  exception_obj_names:
    -

  sfm_dir: ${sfm_base_dir}
  outputs_dir: ${output_base_dir}
  # anno_dir: ${dataset.outputs_dir}/outputs_${match_type}/anno

network:
  detection: loftr
  detection_model_path: weight/superpoint_v1.pth

  matching: loftr
  matching_model_path: weight/superglue_outdoor.pth

sfm:
  down_ratio: 5
  gap: 3
  covis_num: 8
  track_length: 8

post_process:
  filter_bbox_before_filter_track_length: True

verbose: False

# feature:
# method: 'average'
# num_leaf: 6

disable_lightning_logs: True
